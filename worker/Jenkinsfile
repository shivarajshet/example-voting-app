pipeline{
    
    agent any
    
    tools {
	maven "Maven 3.6.1"

    }

    stages {
        stage(build){
            steps{
                echo "Building worker app"
				dir('worker'){
		  			sh 'mvn compile'
		  			sleep 5
                }
            }	
        }
        stage(test){
            steps{
                echo "Testing worker app"
				dir('worker'){
		  			sh 'mvn test'
                  	sleep 5
				}            
        	}		
        }
        
        stage(package){
            steps{
                echo "Pacakaging worker app"
                dir('worker'){
		   			sh 'mvn package'
		   			sleep 5
                }  	
            }
        }
    }
    
    post{
        always{
            echo "Execution of all stages Done"
            archiveArtifacts '**/target/*.jar'
	    	sleep 10
        }
    }
}
